---
title: 多线程
date: 2025-08-12 01:55:16
tags:
categories: 
  - 多线程
  - java
---

# 多线程基础

## 并发和并行

### 概念定义

并发(Concurrency)是指多个任务在同一时间段内交替执行。这些任务由于共享CPU资源，实际上并不是真正的同时执行，而是CPU通过时间片轮转等机制快速地在不同任务之间切换，给用户造成了同时执行的错觉。

并行(Parallelism)是指多个任务在同一时刻同时执行。这要求计算机必须有多个处理器(CPU)或者多核处理器，每个任务分别在不同的处理器或核心上执行，是真正的同时执行。

### 区别对比

1. 
   
2. | 特性         | **并发 (Concurrency)**               | **并行 (Parallelism)**           |
   | :----------- | :----------------------------------- | :------------------------------- |
   | **核心定义** | **逻辑上**的同时处理                 | **物理上**的同时执行             |
   | **关注点**   | **任务交替**执行的能力               | **任务同时**执行的能力           |
   | **资源状态** | **共享资源**，存在竞争条件           | **独享资源**，通常无竞争         |
   | **实现前提** | 单核CPU即可实现                      | **必须多核**CPU才能实现          |
   | **主要目标** | **降低延迟**，提高响应性和资源利用率 | **提高吞吐量**，缩短计算时间     |
   | **典型问题** | **线程安全**、死锁、竞态条件         | **任务分解**、数据划分、负载均衡 |
   | **编程模型** | 多线程、异步回调、协程               | 多进程、MPI、MapReduce           |
   | **设计哲学** | **“看起来”** 同时发生                | **“真正”** 同时发生              |

### 实际应用

1. Web服务器处理请求
   - 采用并发模型处理多个用户请求
   - 每个请求作为一个独立的任务在线程池中执行

2. 视频处理软件
   - 采用并行计算加速视频编码解码
   - 将视频帧分配到不同CPU核心进行处理

3. 游戏引擎
   - 物理计算采用并行处理
   - 游戏逻辑和UI渲染采用并发处理

### 编程考虑

1. 并发编程需要注意：
   - 线程安全问题
   - 死锁预防
   - 资源同步
   - 上下文切换开销

2. 并行编程需要注意：
   - 任务分解粒度
   - 负载均衡
   - 数据依赖关系
   - 硬件资源利用率

- ​并发​​指的是程序​​设计结构​​，关注的是在一段时间内，​​交替​​处理多个任务的能力，解决的是‘等待’的问题，核心挑战是​​线程安全​​。
​- ​并行​​指的是程序​​执行状态​​，依赖多核硬件，在同一​​时刻同时​​执行多个任务，目标是​​提高吞吐量​​，核心挑战是​​任务分解与负载均衡​​。

它们的关系是：​​并发是并行的基础，并行是并发的理想执行模式​​。一个设计良好的并发程序，在有多核硬件支持时，可以高效地并行运行。