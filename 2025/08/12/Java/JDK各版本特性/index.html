<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>JDK各个版本特性总结 | Hexo</title><meta name="author" content="John Doe"><meta name="copyright" content="John Doe"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="JDK各个版本特性总结"><meta name="application-name" content="JDK各个版本特性总结"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="JDK各个版本特性总结"><meta property="og:url" content="http://example.com/2025/08/12/Java/JDK%E5%90%84%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/index.html"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="JDK8 接口默认方法（非抽象方法） Lambda表达式 StreamAPI 默认方法 Optional类   JDK9 模块化系统（Project Jigsaw） G1 成为默认垃圾回收器（GC） JShell（交互式 REPL 工具） 其他新特性   JDK10 局部变量类型推断（var）"><meta property="og:locale" content="en"><meta property="og:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta property="article:author" content="John Doe"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg"><meta name="description" content="JDK8 接口默认方法（非抽象方法） Lambda表达式 StreamAPI 默认方法 Optional类   JDK9 模块化系统（Project Jigsaw） G1 成为默认垃圾回收器（GC） JShell（交互式 REPL 工具） 其他新特性   JDK10 局部变量类型推断（var）"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://example.com/2025/08/12/Java/JDK%E5%90%84%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: 'days',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"Author: John Doe","link":"Link: ","source":"Source: Hexo","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source.","copySuccess":"Copy success, copy and reprint please mark the address of this article"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"Traditional Chinese Activated Manually","cht_to_chs":"Simplified Chinese Activated Manually","day_to_night":"Dark Mode Activated Manually","night_to_day":"Light Mode Activated Manually","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Hexo',
  title: 'JDK各个版本特性总结',
  postAI: '',
  pageFillDescription: 'JDK8, 接口默认方法（非抽象方法）, Lambda表达式, StreamAPI, 默认方法, Optional类, JDK9, 模块化系统（Project Jigsaw）, 主要变化, 关键语法, 启动模块化应用, G1 成为默认垃圾回收器（GC）, 主要特性, 代码体验, 手动指定使用其它 GC, JShell（交互式 REPL 工具）, 其他新特性, 私有接口方法, 集合工厂方法, try-with-resources 改进, Stream API 增强, JDK11, 新特性介绍, 1. 新的字符串方法, 2. 本地变量类型推断支持 lambda 参数（升级）, 3. 文件 Ix2FO 增强, a) Files.readString 和 Files.writeString, b) InputStream.transferTo(OutputStream), 4. 集合工厂方法增强, 5. 新的 Http Client API 标准, 6. 垃圾回收器变化, 7. 新的类库和API移除, 8. 其他, 局部类型推断Var, 1.初始化定义局部变量, 2.增强for循环, 3.传统for循环的index定义, 4.try包裹的变量, 5.lambda中隐含的var推断, 字符串API增强, 标准化HttpClient, 模块化, JDK14, Switch表达式, JDK15, 文本块, JDK16, record类, 定义标准构造函数, 隐式构造函数参数, 定义非标准构造函数, 显式声明公共访问器, record特性, Instance of 匹配, JDK17, Spring和SpringBoot, 增强的伪随机数生成器, 新API举例：, 已内置的实现包括：, Sealed Class 密封类, JDK21, Record Patterns, Switch类型匹配, 基本语法：, 结合守卫（when）进一步增强：, 使用示例：, 虚拟线程, 主要特性, 基本用法示例, 使用 Executors 新 API 批量提交任务, 主要意义, 分代ZGC, JDK21 引入的分代ZGC（Generational ZGC）, 主要特性, 启用分代ZGC, 代码体验（无需代码改动参数可用即生效）, 小结, JDK22, 未命名变量接口默认方法非抽象方法表达式默认方法类模块化系统成为默认垃圾回收器交互式工具其他新特性局部变量类型推断新特性介绍局部类型推断字符串增强标准化模块化表达式文本块类匹配和增强的伪随机数生成器密封类类型匹配虚拟线程分代未命名变量接口默认方法非抽象方法允许在接口中定义默认方法使用关键字这样接口可以包含实现代码但实现类可以选择是否覆盖它示例这是接口的默认方法实现实现抽象方法可以选择覆盖默认方法也可以不覆盖直接使用接口提供的实现自定义实现输出实现抽象方法输出这是接口的默认方法实现意义接口添加新方法时不会破坏已有实现类向后兼容便于接口功能进化表达式默认方法类模块化系统最大的变化之一是引入了模块系统这意味着平台本身以及开发者自定义的代码都可以被组织到模块中主要变化原有的大型被拆分为多个模块开发者可以根据应用需求只引入需要的模块减小体积模块化提高了安全性易于维护关键语法新增文件来定义模块示例指定依赖的模块导出本模块中的包启动模块化应用成为默认垃圾回收器开始垃圾回收器正式取代成为虚拟机的默认垃圾回收器优先满足低延迟高吞吐的服务端场景适合大内存多核处理器的现代应用主要特性支持多核并发低暂停可以通过控制最大暂停时间按分区内存区域灵活高效地并行并发收集不再需要手动指定移除后默认采用代码体验一般不需要更改代码仅参数会切换如需观察启动参数可加手动指定使用其它如需切换回旧的可加参数小结适用于绝大多数服务端应用并且易于配置更加智能自动平衡吞吐与延迟更多参考官方文档交互式工具新增了的工具可以直接输入代码片段并立刻执行便于学习测试和调试常用命令输入表达式语句后直接回车即可查看运行结果退出示例其他新特性私有接口方法接口中允许添加方法用于接口内部的代码复用例如私有接口方法集合工厂方法可以用更简洁的语法创建不可变集合改进资源变量可以在外部声明并在内部使用使用增强新增方法提升流处理能力示例输出新特性介绍新的字符串方法为类增加了大量实用方法判断字符串是否为空白按行拆分字符串为流去除空白符更全面支持空白不同于重复字符串示例按行输出去除所有前后空白本地变量类型推断支持参数升级允许在表达式参数类型前使用关键字可以增强代码一致性和可读性文件增强和简化字符串与文件之间的读写操作简化流传输直接将输入流内容写入输出流集合工厂方法增强结合集合工厂方法使集合构建更加简洁新的标准标准引入了异步同步型垃圾回收器变化默认移除了支持实验性启动参数可使用低延迟垃圾回收器新的类库和移除移除了和模块其他支持运行单文件源代码如可直接运行商业特性开源局部类型推断初始化定义局部变量增强循环传统循环的定义包裹的变量中隐含的推断可以不用明确表达出等价于其中可以省略等价于要注意不能使用混合语法禁止和字符串增强新增了等方法方便对字符串进行处理标准化标准化了新的的模块化表达式文本块将多行文本中的换行符和转义符去除使其变得更易于阅读一个普通的从使用单行文本和文本块的区别空字符串如下文本块必须以和换行符开始以结尾文本结尾是否换行代表最后一行是否有换行符结尾没有换行符结尾有换行符默认情况下会去掉公共缩进空格也就是说所有行最小的缩进会被当作基准去掉所有的缩进为最小的缩进如果想要加前导空格需要将比结尾的缩进更多的空格才能保留下来输出但是这样会带来末尾强制加上了如果不想要换行符可以使用续航符输出类可以定义类会自动生成构造函数方法类是语法糖等价于会自动生成的成员变量以及和成员变量同名的取值方法和定义标准构造函数虽然会自动生成一个构造函数但是也可以定义一个构造函数隐式构造函数参数由于构造函数中的参数签名是同名的因此可以使用隐式的参数构造定义非标准构造函数相比起显式声明标准构造函数我们也可以声明非标准构造函数其传入的可以是自定义的参数但是其必须调用标准的构造函数在这种情况下两种构造函数都是合法的相当于构造函数重载合法合法显式声明公共访问器类会自动生成一个和成员变量同名的访问器方法我们可以显式地声明他以代替自动生成的方法可以声明静态变量静态初始化块静态方法这些是类级别的不影响的不可变特性其行为和普通类中定义是一样的不能声明额外的实例变量和实例初始化代码块这会破坏不可变特性不允许新的实例字段实例初始化块也不允许可以声明额外的实例方法嵌套类嵌套普通实例方法嵌套自动是的使用嵌套的实例方法不能声明方法方法可能会修改内部状态编译错误特性当前章节尚未完成内容正在施工中参考匹配可以直接在中进行类型转换原先需要可以省略要注意其局部变量有范围限制局部变量可以超过的范围在的表达式中使用时要注意前后顺序无法在表达式中使用和和默认采用最低增强的伪随机数生成器增加了新的伪随机数生成器接口并提供了多种现代高质量的实现它相比老的更易于使用支持可插拔算法和流式操作适合对可重复性和性能有更高要求的场景新举例获取系统默认高质量生成器生成随机整数也可以指定算法比如支持流式生成输出个的随机整数已内置的实现包括已有被统一管理以及传统的等密封类让父类显式声明可以继承其的子类限制继承类型声明的继承是受限制的列出允许的子类子类必须显式声明继承策略不能再被继承继续限制下一层继承解封允许任何类再继承类型匹配增强了可用于类型判断和模式匹配使代码更简洁类型安全基本语法整数字符串其他类型如果是类型自动解包为变量如果是类型自动解包为变量可以直接匹配为兜底分支结合守卫进一步增强正整数非正整数浮点数其他数字类型或后跟条件只有条件满足时才匹配该分支使用示例输出整数输出字符串输出输出其他类型输出正整数输出非正整数输出输出浮点数类型安全避免频繁的强转代码逻辑更清晰简洁虚拟线程正式引入虚拟线程这是并发模型的一次重要革新虚拟线程是一种轻量级线程由虚拟机调度可以大幅提升高并发场景下的吞吐与资源利用率极大简化高并发服务器编写难度主要特性虚拟线程是的一种实现与平台线程拥有基本一致的创建和销毁虚拟线程的代价极低通常能轻松创建数万甚至百万级的虚拟线程让阻塞型代码如等与异步编程一样高效但代码风格仍为同步方式易读易维护线程调度交由背后通常与平台线程池绑定但用户无需关心基本用法示例创建单个虚拟线程并启动当前线程等待线程结束同时启动一万个虚拟线程每个线程一下等待所有虚拟线程结束所有虚拟线程已结束使用新批量提交任务全部任务提交结束主要意义能用看起来阻塞实则调度高效的方式编写高并发网络应用程序如服务器大幅减少复杂回调地狱或异步代码需求提高应用的可维护性扩展性和吞吐能力虚拟线程的提出标志着在并发编程领域迈向之类百万协程时代的能力同时保留了严谨的类型系统和现有生态的兼容性分代引入的分代分代是在原有垃圾回收器基础上实现的分代功能进一步提升了低延迟垃圾回收的效率特别是在大对象新生代对象生命周期频繁变动的应用场景主要特性支持将堆划分为新生代和老年代对大多数短命对象进行更高效的内存回收减少发生频率保持本身的低暂停亚毫秒级和可扩展性提升了吞吐量降低了应用延迟启用分代启动参数示例代码体验无需代码改动参数可用即生效启动时加如下参数分配日志示例可以添加观察小结分代结合了分代回收的高效性和的低延迟能力非常适用于服务端大型数据应用和需要低暂停的系统若使用推荐在加启以充分发挥优势更多参考未命名变量',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-12-31 17:16:59',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><link rel="stylesheet" href="/css/custom.css"><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">Hexo</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> Newest Comments</span></div><div class="aside-list"><span>loading...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>2</sup></a><a href="/tags/leetcode/" style="font-size: 1.05rem;">leetcode<sup>5</sup></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 1.05rem;">分布式<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.05rem;">数据库<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem;">网络安全<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>Archives</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">December 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">8</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/09/"><span class="card-archive-list-date">September 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/08/"><span class="card-archive-list-date">August 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">27</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/" itemprop="url">java</a></span><span class="article-meta tags"></span></div></div><h1 class="post-title" itemprop="name headline">JDK各个版本特性总结</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-08-11T17:55:16.000Z" title="Created 2025-08-12 01:55:16">2025-08-12</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-12-31T09:16:59.313Z" title="Updated 2025-12-31 17:16:59">2025-12-31</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为长沙"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>长沙</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2025/08/12/Java/JDK%E5%90%84%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/"><header><a class="post-meta-categories" href="/categories/java/" itemprop="url">java</a><h1 id="CrawlerTitle" itemprop="name headline">JDK各个版本特性总结</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">John Doe</span><time itemprop="dateCreated datePublished" datetime="2025-08-11T17:55:16.000Z" title="Created 2025-08-12 01:55:16">2025-08-12</time><time itemprop="dateCreated datePublished" datetime="2025-12-31T09:16:59.313Z" title="Updated 2025-12-31 17:16:59">2025-12-31</time></header><!-- TOC -->
<ul>
<li><a href="#jdk8">JDK8</a><ul>
<li><a href="#%E6%8E%A5%E5%8F%A3%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95%E9%9D%9E%E6%8A%BD%E8%B1%A1%E6%96%B9%E6%B3%95">接口默认方法（非抽象方法）</a></li>
<li><a href="#lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F">Lambda表达式</a></li>
<li><a href="#streamapi">StreamAPI</a></li>
<li><a href="#%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95">默认方法</a></li>
<li><a href="#optional%E7%B1%BB">Optional类</a></li>
</ul>
</li>
<li><a href="#jdk9">JDK9</a><ul>
<li><a href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E7%B3%BB%E7%BB%9Fproject-jigsaw">模块化系统（Project Jigsaw）</a></li>
<li><a href="#g1-%E6%88%90%E4%B8%BA%E9%BB%98%E8%AE%A4%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8gc">G1 成为默认垃圾回收器（GC）</a></li>
<li><a href="#jshell%E4%BA%A4%E4%BA%92%E5%BC%8F-repl-%E5%B7%A5%E5%85%B7">JShell（交互式 REPL 工具）</a></li>
<li><a href="#%E5%85%B6%E4%BB%96%E6%96%B0%E7%89%B9%E6%80%A7">其他新特性</a></li>
</ul>
</li>
<li><a href="#jdk10">JDK10</a><ul>
<li><a href="#%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%ADvar">局部变量类型推断（var）</a></li>
</ul>
</li>
<li><a href="#jdk11">JDK11</a><ul>
<li><a href="#%E6%96%B0%E7%89%B9%E6%80%A7%E4%BB%8B%E7%BB%8D">新特性介绍</a></li>
<li><a href="#%E5%B1%80%E9%83%A8%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%ADvar">局部类型推断Var</a></li>
<li><a href="#%E5%AD%97%E7%AC%A6%E4%B8%B2api%E5%A2%9E%E5%BC%BA">字符串API增强</a></li>
<li><a href="#%E6%A0%87%E5%87%86%E5%8C%96httpclient">标准化HttpClient</a></li>
<li><a href="#%E6%A8%A1%E5%9D%97%E5%8C%96">模块化</a></li>
</ul>
</li>
<li><a href="#jdk14">JDK14</a><ul>
<li><a href="#switch%E8%A1%A8%E8%BE%BE%E5%BC%8F">Switch表达式</a></li>
</ul>
</li>
<li><a href="#jdk15">JDK15</a><ul>
<li><a href="#%E6%96%87%E6%9C%AC%E5%9D%97">文本块</a></li>
</ul>
</li>
<li><a href="#jdk16">JDK16</a><ul>
<li><a href="#record%E7%B1%BB">record类</a></li>
<li><a href="#instance-of-%E5%8C%B9%E9%85%8D">Instance of 匹配</a></li>
</ul>
</li>
<li><a href="#jdk17">JDK17</a><ul>
<li><a href="#spring%E5%92%8Cspringboot">Spring和SpringBoot</a></li>
<li><a href="#%E5%A2%9E%E5%BC%BA%E7%9A%84%E4%BC%AA%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%94%9F%E6%88%90%E5%99%A8">增强的伪随机数生成器</a></li>
<li><a href="#sealed-class-%E5%AF%86%E5%B0%81%E7%B1%BB">Sealed Class 密封类</a></li>
</ul>
</li>
<li><a href="#jdk21">JDK21</a><ul>
<li><a href="#record-patterns">Record Patterns</a></li>
<li><a href="#switch%E7%B1%BB%E5%9E%8B%E5%8C%B9%E9%85%8D">Switch类型匹配</a></li>
<li><a href="#%E8%99%9A%E6%8B%9F%E7%BA%BF%E7%A8%8B">虚拟线程</a></li>
<li><a href="#%E5%88%86%E4%BB%A3zgc">分代ZGC</a></li>
</ul>
</li>
<li><a href="#jdk22">JDK22</a><ul>
<li><a href="#%E6%9C%AA%E5%91%BD%E5%90%8D%E5%8F%98%E9%87%8F">未命名变量</a></li>
</ul>
</li>
</ul>
<!-- /TOC -->

<h1 id="JDK8"><a href="#JDK8" class="headerlink" title="JDK8"></a>JDK8</h1><h2 id="接口默认方法（非抽象方法）"><a href="#接口默认方法（非抽象方法）" class="headerlink" title="接口默认方法（非抽象方法）"></a>接口默认方法（非抽象方法）</h2><p>JDK8允许在接口中定义默认方法（使用default关键字），这样接口可以包含实现代码，但实现类可以选择是否覆盖它。</p>
<p><strong>示例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">abstractMethod</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">defaultMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;这是接口的默认方法实现&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MyClass</span> <span class="keyword">implements</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">abstractMethod</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;实现抽象方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 可以选择覆盖默认方法，也可以不覆盖，直接使用接口提供的实现</span></span><br><span class="line">    <span class="comment">// @Override</span></span><br><span class="line">    <span class="comment">// public void defaultMethod() &#123;</span></span><br><span class="line">    <span class="comment">//     System.out.println(&quot;自定义实现&quot;);</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Demo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">MyClass</span> <span class="variable">obj</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MyClass</span>();</span><br><span class="line">        obj.abstractMethod(); <span class="comment">// 输出: 实现抽象方法</span></span><br><span class="line">        obj.defaultMethod();  <span class="comment">// 输出: 这是接口的默认方法实现</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>意义：</strong></p>
<ul>
<li>接口添加新方法时不会破坏已有实现类（向后兼容）</li>
<li>便于接口功能进化</li>
</ul>
<h2 id="Lambda表达式"><a href="#Lambda表达式" class="headerlink" title="Lambda表达式"></a>Lambda表达式</h2><h2 id="StreamAPI"><a href="#StreamAPI" class="headerlink" title="StreamAPI"></a>StreamAPI</h2><h2 id="默认方法"><a href="#默认方法" class="headerlink" title="默认方法"></a>默认方法</h2><h2 id="Optional类"><a href="#Optional类" class="headerlink" title="Optional类"></a>Optional类</h2><h1 id="JDK9"><a href="#JDK9" class="headerlink" title="JDK9"></a>JDK9</h1><h2 id="模块化系统（Project-Jigsaw）"><a href="#模块化系统（Project-Jigsaw）" class="headerlink" title="模块化系统（Project Jigsaw）"></a>模块化系统（Project Jigsaw）</h2><p>JDK9 最大的变化之一是引入了模块系统——Project Jigsaw，这意味着 Java 平台本身，以及开发者自定义的代码，都可以被组织到模块中。</p>
<h3 id="主要变化"><a href="#主要变化" class="headerlink" title="主要变化"></a>主要变化</h3><ul>
<li>原有的大型 JDK 被拆分为 90 多个模块</li>
<li>开发者可以根据应用需求只引入需要的模块，减小体积</li>
<li>模块化提高了安全性，易于维护</li>
</ul>
<h3 id="关键语法"><a href="#关键语法" class="headerlink" title="关键语法"></a>关键语法</h3><ul>
<li>新增 <code>module-info.java</code> 文件来定义模块</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// module-info.java</span></span><br><span class="line"><span class="keyword">module</span> com.example.myapp &#123;</span><br><span class="line">    <span class="keyword">requires</span> java.sql;</span><br><span class="line">    <span class="keyword">exports</span> com.example.myapp.api;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>requires</code> 指定依赖的模块</li>
<li><code>exports</code> 导出本模块中的包</li>
</ul>
<h3 id="启动模块化应用"><a href="#启动模块化应用" class="headerlink" title="启动模块化应用"></a>启动模块化应用</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java --module-path mods -m com.example.myapp/com.example.myapp.Main</span><br></pre></td></tr></table></figure>
<h2 id="G1-成为默认垃圾回收器（GC）"><a href="#G1-成为默认垃圾回收器（GC）" class="headerlink" title="G1 成为默认垃圾回收器（GC）"></a>G1 成为默认垃圾回收器（GC）</h2><p>JDK9 开始，G1（Garbage-First）垃圾回收器正式取代 Parallel GC，成为 Java 虚拟机的默认垃圾回收器。G1 优先满足低延迟、高吞吐的服务端场景，适合大内存、多核处理器的现代应用。</p>
<h3 id="主要特性"><a href="#主要特性" class="headerlink" title="主要特性"></a>主要特性</h3><ul>
<li>支持多核并发、低暂停 GC</li>
<li>可以通过 <code>-XX:MaxGCPauseMillis</code> 控制最大暂停时间</li>
<li>按“分区”内存区域，灵活高效地并行&#x2F;并发收集</li>
<li>不再需要手动指定 <code>-XX:+UseG1GC</code>，移除后默认采用 G1</li>
</ul>
<h3 id="代码体验"><a href="#代码体验" class="headerlink" title="代码体验"></a>代码体验</h3><p>一般不需要更改代码，仅 VM 参数会切换。如需观察，启动参数可加：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:+PrintGCDetails -XX:+PrintGCDateStamps</span><br></pre></td></tr></table></figure>

<h3 id="手动指定使用其它-GC"><a href="#手动指定使用其它-GC" class="headerlink" title="手动指定使用其它 GC"></a>手动指定使用其它 GC</h3><p>如需切换回旧的 Parallel GC，可加参数：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:+UseParallelGC</span><br></pre></td></tr></table></figure>

<p><strong>小结</strong>：<br>G1 适用于绝大多数服务端应用，并且易于配置、更加智能，自动平衡吞吐与延迟。</p>
<p>更多参考：  </p>
<ul>
<li><a target="_blank" rel="noopener" href="https://docs.oracle.com/javase/9/gctuning/garbage-first-garbage-collector.htm">Java 官方文档</a></li>
<li><a target="_blank" rel="noopener" href="https://openjdk.org/jeps/248">JEP 248: Make G1 the Default Garbage Collector</a></li>
</ul>
<h2 id="JShell（交互式-REPL-工具）"><a href="#JShell（交互式-REPL-工具）" class="headerlink" title="JShell（交互式 REPL 工具）"></a>JShell（交互式 REPL 工具）</h2><p>JDK9 新增了 Java 的 REPL 工具——JShell，可以直接输入 Java 代码片段并立刻执行，便于学习、测试和调试。</p>
<p><strong>常用命令：</strong></p>
<ul>
<li>输入表达式&#x2F;语句后直接回车即可查看运行结果。</li>
<li><code>/exit</code> 退出 JShell</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">jshell</span><br><span class="line">jshell&gt; int x = 10;</span><br><span class="line">jshell&gt; System.out.println(x * 2);</span><br><span class="line">20</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="其他新特性"><a href="#其他新特性" class="headerlink" title="其他新特性"></a>其他新特性</h2><h3 id="私有接口方法"><a href="#私有接口方法" class="headerlink" title="私有接口方法"></a>私有接口方法</h3><p>接口中允许添加 private 方法，用于接口内部的代码复用。例如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">MyInterface</span> &#123;</span><br><span class="line">    <span class="keyword">default</span> <span class="keyword">void</span> <span class="title function_">foo</span><span class="params">()</span> &#123;</span><br><span class="line">        bar();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">bar</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;私有接口方法&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="集合工厂方法"><a href="#集合工厂方法" class="headerlink" title="集合工厂方法"></a>集合工厂方法</h3><p>可以用更简洁的语法创建不可变集合：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = List.of(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line">Set&lt;Integer&gt; set = Set.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line">Map&lt;String, Integer&gt; map = Map.of(<span class="string">&quot;a&quot;</span>, <span class="number">1</span>, <span class="string">&quot;b&quot;</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<h3 id="try-with-resources-改进"><a href="#try-with-resources-改进" class="headerlink" title="try-with-resources 改进"></a>try-with-resources 改进</h3><p>资源变量可以在 try 外部声明并在 try 内部使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Resource</span> <span class="variable">resource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Resource</span>();</span><br><span class="line"><span class="keyword">try</span> (resource) &#123;</span><br><span class="line">    <span class="comment">// 使用 resource</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Stream-API-增强"><a href="#Stream-API-增强" class="headerlink" title="Stream API 增强"></a>Stream API 增强</h3><ul>
<li>新增 <code>takeWhile</code>, <code>dropWhile</code>, <code>ofNullable</code> 方法提升流处理能力</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list = List.of(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">6</span>, <span class="number">7</span>);</span><br><span class="line">list.stream().takeWhile(n -&gt; n &gt; <span class="number">0</span>).forEach(System.out::println); <span class="comment">// 输出: 1 2 3 4 5</span></span><br></pre></td></tr></table></figure>

<hr>
<h1 id="JDK11"><a href="#JDK11" class="headerlink" title="JDK11"></a>JDK11</h1><h3 id="新特性介绍"><a href="#新特性介绍" class="headerlink" title="新特性介绍"></a>新特性介绍</h3><h4 id="1-新的字符串方法"><a href="#1-新的字符串方法" class="headerlink" title="1. 新的字符串方法"></a>1. 新的字符串方法</h4><p>JDK11 为 <code>String</code> 类增加了大量实用方法：</p>
<ul>
<li><code>isBlank()</code>：判断字符串是否为空白。</li>
<li><code>lines()</code>：按行拆分字符串为流。</li>
<li><code>strip()</code>, <code>stripLeading()</code>, <code>stripTrailing()</code>：去除空白符（更全面支持 Unicode 空白，不同于 <code>trim()</code>）。</li>
<li><code>repeat(int count)</code>：重复字符串。</li>
</ul>
<p><strong>示例：</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;  Hello Java  \nwelcome  &quot;</span>;</span><br><span class="line">System.out.println(str.isBlank()); <span class="comment">// false</span></span><br><span class="line">str.lines().forEach(System.out::println); <span class="comment">// 按行输出</span></span><br><span class="line">System.out.println(str.strip()); <span class="comment">// 去除所有前后空白</span></span><br><span class="line">System.out.println(<span class="string">&quot;abc&quot;</span>.repeat(<span class="number">3</span>)); <span class="comment">// abcabcabc</span></span><br></pre></td></tr></table></figure>

<h4 id="2-本地变量类型推断支持-lambda-参数（升级）"><a href="#2-本地变量类型推断支持-lambda-参数（升级）" class="headerlink" title="2. 本地变量类型推断支持 lambda 参数（升级）"></a>2. 本地变量类型推断支持 lambda 参数（升级）</h4><p>允许在 lambda 表达式参数类型前使用 <code>var</code> 关键字，可以增强代码一致性和可读性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BiFunction&lt;Integer, Integer, Integer&gt; add = (<span class="keyword">var</span> a, <span class="keyword">var</span> b) -&gt; a + b;</span><br></pre></td></tr></table></figure>

<h4 id="3-文件-I-O-增强"><a href="#3-文件-I-O-增强" class="headerlink" title="3. 文件 I&#x2F;O 增强"></a>3. 文件 I&#x2F;O 增强</h4><h5 id="a-Files-readString-和-Files-writeString"><a href="#a-Files-readString-和-Files-writeString" class="headerlink" title="a) Files.readString 和 Files.writeString"></a>a) <code>Files.readString</code> 和 <code>Files.writeString</code></h5><p>简化字符串与文件之间的读写操作：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(<span class="string">&quot;demo.txt&quot;</span>);</span><br><span class="line">Files.writeString(path, <span class="string">&quot;Hello JDK11!&quot;</span>);</span><br><span class="line"><span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> Files.readString(path);</span><br><span class="line">System.out.println(content);</span><br></pre></td></tr></table></figure>

<h5 id="b-InputStream-transferTo-OutputStream"><a href="#b-InputStream-transferTo-OutputStream" class="headerlink" title="b) InputStream.transferTo(OutputStream)"></a>b) <code>InputStream.transferTo(OutputStream)</code></h5><p>简化流传输：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">InputStream</span> <span class="variable">in</span> <span class="operator">=</span> Files.newInputStream(Paths.get(<span class="string">&quot;input.txt&quot;</span>));</span><br><span class="line">     <span class="type">OutputStream</span> <span class="variable">out</span> <span class="operator">=</span> Files.newOutputStream(Paths.get(<span class="string">&quot;output.txt&quot;</span>))) &#123;</span><br><span class="line">    in.transferTo(out); <span class="comment">// 直接将输入流内容写入输出流</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-集合工厂方法增强"><a href="#4-集合工厂方法增强" class="headerlink" title="4. 集合工厂方法增强"></a>4. 集合工厂方法增强</h4><p><code>var</code> 结合集合工厂方法，使集合构建更加简洁：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">immutableList</span> <span class="operator">=</span> List.of(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="5-新的-Http-Client-API-标准"><a href="#5-新的-Http-Client-API-标准" class="headerlink" title="5. 新的 Http Client API 标准"></a>5. 新的 Http Client API 标准</h4><p>JDK11 标准引入了异步&#x2F;同步型 Http Client：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HttpClient</span> <span class="variable">client</span> <span class="operator">=</span> HttpClient.newHttpClient();</span><br><span class="line"><span class="type">HttpRequest</span> <span class="variable">request</span> <span class="operator">=</span> HttpRequest.newBuilder()</span><br><span class="line">    .uri(URI.create(<span class="string">&quot;https://example.com&quot;</span>))</span><br><span class="line">    .build();</span><br><span class="line">HttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());</span><br><span class="line">System.out.println(response.body());</span><br></pre></td></tr></table></figure>

<h4 id="6-垃圾回收器变化"><a href="#6-垃圾回收器变化" class="headerlink" title="6. 垃圾回收器变化"></a>6. 垃圾回收器变化</h4><ul>
<li>默认移除了 CMS，支持 ZGC(实验性)。</li>
<li><code>-XX:+UseZGC</code> 启动参数可使用低延迟垃圾回收器。</li>
</ul>
<h4 id="7-新的类库和API移除"><a href="#7-新的类库和API移除" class="headerlink" title="7. 新的类库和API移除"></a>7. 新的类库和API移除</h4><ul>
<li>移除了 Java EE 和 CORBA 模块。</li>
</ul>
<h4 id="8-其他"><a href="#8-其他" class="headerlink" title="8. 其他"></a>8. 其他</h4><ul>
<li>支持运行单文件源代码，如 <code>java Hello.java</code> 可直接运行。</li>
<li>Flight Recorder 商业特性开源。</li>
</ul>
<h2 id="局部类型推断Var"><a href="#局部类型推断Var" class="headerlink" title="局部类型推断Var"></a>局部类型推断Var</h2><h3 id="1-初始化定义局部变量"><a href="#1-初始化定义局部变量" class="headerlink" title="1.初始化定义局部变量"></a>1.初始化定义局部变量</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">list</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();    <span class="comment">// infers ArrayList&lt;String&gt;</span></span><br><span class="line"><span class="type">var</span> <span class="variable">stream</span> <span class="operator">=</span> list.stream();            <span class="comment">// infers Stream&lt;String&gt;</span></span><br><span class="line"><span class="type">var</span> <span class="variable">path</span> <span class="operator">=</span> Paths.get(fileName);        <span class="comment">// infers Path</span></span><br><span class="line"><span class="type">var</span> <span class="variable">bytes</span> <span class="operator">=</span> Files.readAllBytes(path);  <span class="comment">// infers bytes[]</span></span><br></pre></td></tr></table></figure>

<h3 id="2-增强for循环"><a href="#2-增强for循环" class="headerlink" title="2.增强for循环"></a>2.增强for循环</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; myList = Arrays.asList(<span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="string">&quot;c&quot;</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> element : myList) &#123;...&#125;  <span class="comment">// infers String</span></span><br></pre></td></tr></table></figure>

<h3 id="3-传统for循环的index定义"><a href="#3-传统for循环的index定义" class="headerlink" title="3.传统for循环的index定义"></a>3.传统for循环的index定义</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="type">var</span> <span class="variable">counter</span> <span class="operator">=</span> <span class="number">0</span>; counter &lt; <span class="number">10</span>; counter++)  &#123;...&#125;   <span class="comment">// infers int</span></span><br></pre></td></tr></table></figure>

<h3 id="4-try包裹的变量"><a href="#4-try包裹的变量" class="headerlink" title="4.try包裹的变量"></a>4.try包裹的变量</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">try (var input = </span><br><span class="line">     new FileInputStream(&quot;validation.txt&quot;)) &#123;...&#125;   // infers FileInputStream</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-lambda中隐含的var推断"><a href="#5-lambda中隐含的var推断" class="headerlink" title="5.lambda中隐含的var推断"></a>5.lambda中隐含的var推断</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BiFunction&lt;Integer, Integer, Integer&gt; sumFunction = (Integer a, Integer b) -&gt; a + b;</span><br></pre></td></tr></table></figure>

<p>可以不用明确表达出<code>Integer</code>，等价于：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BiFunction&lt;Integer, Integer, Integer&gt; sumFunction = (<span class="keyword">var</span> a, <span class="keyword">var</span> b) -&gt; a + b;</span><br></pre></td></tr></table></figure>

<p>其中<code>var</code>可以省略，等价于：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BiFunction&lt;Integer, Integer, Integer&gt; sumFunction = (a, b) -&gt; a + b;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>要注意不能使用混合语法：</p>
</blockquote>
<p>禁止：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Integer a, <span class="keyword">var</span> b) -&gt; a + b;</span><br></pre></td></tr></table></figure>

<p>和</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">var</span> a, b) -&gt; a + b;</span><br></pre></td></tr></table></figure>

<h2 id="字符串API增强"><a href="#字符串API增强" class="headerlink" title="字符串API增强"></a>字符串API增强</h2><p>新增了<code>isBlank()</code>、<code>strip()</code>、<code>repeat()</code>等方法，方便对字符串进行处理。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">str</span> <span class="operator">=</span> <span class="string">&quot;  Hello  &quot;</span>;</span><br><span class="line">System.out.println(str.isBlank()); <span class="comment">//false</span></span><br><span class="line">System.out.println(str.strip()); <span class="comment">// Hello</span></span><br><span class="line">System.out.println(str.repeat(<span class="number">3</span>)); <span class="comment">//  Hello    Hello    Hello  </span></span><br></pre></td></tr></table></figure>

<h2 id="标准化HttpClient"><a href="#标准化HttpClient" class="headerlink" title="标准化HttpClient"></a>标准化HttpClient</h2><p>标准化了新的HttpClient的API</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">HttpClient</span> <span class="variable">client</span> <span class="operator">=</span> HttpClient.newHttpClient();</span><br><span class="line"><span class="type">HttpRequest</span> <span class="variable">request</span> <span class="operator">=</span> HttpRequest.newBuilder()</span><br><span class="line">        .uri(URI.create(<span class="string">&quot;https://example.com&quot;</span>))</span><br><span class="line">        .build();</span><br><span class="line">HttpResponse&lt;String&gt; response = client.send(request, HttpResponse.BodyHandlers.ofString());</span><br><span class="line">System.out.println(response.body());</span><br></pre></td></tr></table></figure>

<h2 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h2><h1 id="JDK14"><a href="#JDK14" class="headerlink" title="JDK14"></a>JDK14</h1><h2 id="Switch表达式"><a href="#Switch表达式" class="headerlink" title="Switch表达式"></a>Switch表达式</h2><h1 id="JDK15"><a href="#JDK15" class="headerlink" title="JDK15"></a>JDK15</h1><h2 id="文本块"><a href="#文本块" class="headerlink" title="文本块"></a>文本块</h2><p>将多行文本中的<code>换行符</code>和<code>转义符</code>去除，使其变得更易于阅读。</p>
<p>一个普通的SQL从使用单行文本和文本块的区别：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Using <span class="string">&quot;one-dimensional&quot;</span> string literals</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">query</span> <span class="operator">=</span> <span class="string">&quot;SELECT \&quot;EMP_ID\&quot;, \&quot;LAST_NAME\&quot; FROM \&quot;EMPLOYEE_TB\&quot;\n&quot;</span> +</span><br><span class="line">               <span class="string">&quot;WHERE \&quot;CITY\&quot; = &#x27;INDIANAPOLIS&#x27;\n&quot;</span> +</span><br><span class="line">               <span class="string">&quot;ORDER BY \&quot;EMP_ID\&quot;, \&quot;LAST_NAME\&quot;;\n&quot;</span>;</span><br><span class="line">Using a <span class="string">&quot;two-dimensional&quot;</span> block of text</span><br><span class="line"></span><br><span class="line"><span class="type">String</span> <span class="variable">query</span> <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">               SELECT &quot;EMP_ID&quot;, &quot;LAST_NAME&quot; FROM &quot;EMPLOYEE_TB&quot;</span></span><br><span class="line"><span class="string">               WHERE &quot;CITY&quot; = &#x27;INDIANAPOLIS&#x27;</span></span><br><span class="line"><span class="string">               ORDER BY &quot;EMP_ID&quot;, &quot;LAST_NAME&quot;;</span></span><br><span class="line"><span class="string">               &quot;&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>空字符串如下，文本块必须以<code>&quot;&quot;&quot;</code>和换行符开始。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">empty</span> <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>以<code>&quot;&quot;&quot;</code>结尾，文本结尾是否换行，代表最后一行是否有换行符。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">结尾没有换行符\n</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">line 1</span></span><br><span class="line"><span class="string">line 2</span></span><br><span class="line"><span class="string">line 3&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">结尾有换行符\n</span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">line 1</span></span><br><span class="line"><span class="string">line 2</span></span><br><span class="line"><span class="string">line 3</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure>

<p>默认情况下，Java <strong>会去掉公共缩进空格</strong>。也就是说，所有行最小的缩进会被当作“基准”去掉。所有的缩进为最小的缩进，如果想要加前导空格，需要将比结尾 <code>&quot;&quot;&quot;</code> 的缩进更多的空格，才能保留下来：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        hello</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>;</span><br><span class="line"><span class="comment">// 输出：        hello\n</span></span><br></pre></td></tr></table></figure>

<p>但是这样会带来hello末尾强制加上了<code>\n</code>，如果不想要换行符，可以使用续航符<code>\</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s</span> <span class="operator">=</span> <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        hello\</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>;</span><br><span class="line"><span class="comment">//输出：：        hello</span></span><br></pre></td></tr></table></figure>

<h1 id="JDK16"><a href="#JDK16" class="headerlink" title="JDK16"></a>JDK16</h1><h2 id="record类"><a href="#record类" class="headerlink" title="record类"></a>record类</h2><p>可以定义<code>record</code>类，会自动生成<code>构造函数</code>,<code>equals</code>,<code>hashcode</code>,<code>toString</code>方法，<code>record</code>类是语法糖</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123; &#125;</span><br></pre></td></tr></table></figure>

<p>等价于</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">class</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span> length;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">double</span> width;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.length = length;</span><br><span class="line">        <span class="built_in">this</span>.width = width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">double</span> <span class="title function_">length</span><span class="params">()</span> &#123; <span class="keyword">return</span> <span class="built_in">this</span>.length; &#125;</span><br><span class="line">    <span class="type">double</span> <span class="title function_">width</span><span class="params">()</span>  &#123; <span class="keyword">return</span> <span class="built_in">this</span>.width; &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Implementation of equals() and hashCode(), which specify</span></span><br><span class="line">    <span class="comment">// that two record objects are equal if they</span></span><br><span class="line">    <span class="comment">// are of the same type and contain equal field values.</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> equals...</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> hashCode...</span><br><span class="line"></span><br><span class="line">    <span class="comment">// An implementation of toString() that returns a string</span></span><br><span class="line">    <span class="comment">// representation of all the record class&#x27;s fields,</span></span><br><span class="line">    <span class="comment">// including their names.</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>会自动生成<code>private final</code>的成员变量，以及和成员变量同名的取值方法<code>witdth()</code>和<code>length()</code>。</p>
<h3 id="定义标准构造函数"><a href="#定义标准构造函数" class="headerlink" title="定义标准构造函数"></a>定义标准构造函数</h3><p>虽然record会自动生成一个构造函数，但是也可以定义一个构造函数。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (length &lt;= <span class="number">0</span> || width &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">java</span>.lang.IllegalArgumentException(</span><br><span class="line">                String.format(<span class="string">&quot;Invalid dimensions: %f, %f&quot;</span>, length, width));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">this</span>.length = length;</span><br><span class="line">        <span class="built_in">this</span>.width = width;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="隐式构造函数参数"><a href="#隐式构造函数参数" class="headerlink" title="隐式构造函数参数"></a>隐式构造函数参数</h3><p>由于构造函数中的参数签名是同名的，因此可以使用隐式的参数构造。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Rectangle &#123;</span><br><span class="line">        <span class="keyword">if</span> (length &lt;= <span class="number">0</span> || width &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">java</span>.lang.IllegalArgumentException(</span><br><span class="line">                String.format(<span class="string">&quot;Invalid dimensions: %f, %f&quot;</span>, length, width));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="定义非标准构造函数"><a href="#定义非标准构造函数" class="headerlink" title="定义非标准构造函数"></a>定义非标准构造函数</h3><p>相比起显式声明标准构造函数，我们也可以声明非标准构造函数，其传入的可以是自定义的参数，但是其必须调用标准的构造函数，在这种情况下，两种构造函数都是合法的，相当于构造函数重载。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">RectanglePair</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">RectanglePair</span><span class="params">(Pair&lt;Double&gt; corner)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>(corner.x(), corner.y());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">RectanglePair</span>  <span class="variable">rectanglePair</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RectanglePair</span>(<span class="number">5.0</span>,<span class="number">2.0</span>); <span class="comment">//合法</span></span><br><span class="line"><span class="type">RectanglePair</span>  <span class="variable">rectanglePair2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RectanglePair</span>(<span class="keyword">new</span> <span class="title class_">Pair</span>&lt;&gt;(<span class="number">6.0</span>, <span class="number">3.0</span>)); <span class="comment">//合法</span></span><br></pre></td></tr></table></figure>



<h3 id="显式声明公共访问器"><a href="#显式声明公共访问器" class="headerlink" title="显式声明公共访问器"></a>显式声明公共访问器</h3><p><code>record</code>类会自动生成一个和成员变量同名的访问器方法，我们可以显式地声明他以代替自动生成的方法。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">// Public accessor method</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">length</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Length is &quot;</span> + length);</span><br><span class="line">        <span class="keyword">return</span> length;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>可以声明</strong>静态变量、静态初始化块、静态方法，这些是类级别的，不影响record的不可变特性，其行为和普通类中定义是一样的。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="type">double</span> goldenRatio;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        goldenRatio = (<span class="number">1</span> + Math.sqrt(<span class="number">5</span>)) / <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> Rectangle <span class="title function_">createGoldenRectangle</span><span class="params">(<span class="type">double</span> width)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Rectangle</span>(width, width * goldenRatio);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>不能声明</strong>额外的实例变量和实例初始化代码块，这会破坏<code>record</code>不可变特性。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line">    BiFunction&lt;Double, Double, Double&gt; diagonal; <span class="comment">// ❌ 不允许新的实例字段</span></span><br><span class="line"></span><br><span class="line">    &#123; <span class="comment">// ❌ 实例初始化块也不允许</span></span><br><span class="line">        diagonal = (x, y) -&gt; Math.sqrt(x*x + y*y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>可以声明</strong>额外的实例方法，嵌套类，嵌套record</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">Rectangle</span><span class="params">(<span class="type">double</span> length, <span class="type">double</span> width)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 普通实例方法</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">area</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> length * width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 嵌套 record（自动是 static 的）</span></span><br><span class="line">    <span class="keyword">record</span> <span class="title class_">RotationAngle</span><span class="params">(<span class="type">double</span> angle)</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> RotationAngle &#123;</span><br><span class="line">            angle = Math.toRadians(angle);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 使用嵌套 record 的实例方法</span></span><br><span class="line">    <span class="keyword">public</span> Rectangle <span class="title function_">getRotatedRectangleBoundingBox</span><span class="params">(<span class="type">double</span> angle)</span> &#123;</span><br><span class="line">        <span class="type">RotationAngle</span> <span class="variable">ra</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RotationAngle</span>(angle);</span><br><span class="line">        <span class="type">double</span> <span class="variable">x</span> <span class="operator">=</span> Math.abs(length * Math.cos(ra.angle())) +</span><br><span class="line">                   Math.abs(width  * Math.sin(ra.angle()));</span><br><span class="line">        <span class="type">double</span> <span class="variable">y</span> <span class="operator">=</span> Math.abs(length * Math.sin(ra.angle())) +</span><br><span class="line">                   Math.abs(width  * Math.cos(ra.angle()));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Rectangle</span>(x, y);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>不能声明</strong>native方法，native方法可能会修改record内部状态。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">record</span> <span class="title class_">BadRecord</span><span class="params">(<span class="type">int</span> x)</span> &#123;</span><br><span class="line">    <span class="keyword">native</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span>; <span class="comment">// ❌ 编译错误</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="record特性"><a href="#record特性" class="headerlink" title="record特性"></a>record特性</h3><blockquote>
<p><strong>⚠️ TODO</strong></p>
<p>当前章节尚未完成，内容正在施工中……</p>
<p>参考 <a target="_blank" rel="noopener" href="https://docs.oracle.com/en/java/javase/24/language/records.html#GUID-4D67C7AF-67A2-4B31-8EA7-F1E913F54BE6">Record Classes</a></p>
</blockquote>
<h2 id="Instance-of-匹配"><a href="#Instance-of-匹配" class="headerlink" title="Instance of 匹配"></a>Instance of 匹配</h2><p>可以直接在<code>instance of</code>中进行类型转换</p>
<p>原先需要</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Shape</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">getPerimeter</span><span class="params">(Shape s)</span> <span class="keyword">throws</span> IllegalArgumentException &#123;</span><br><span class="line">        <span class="keyword">if</span> (s <span class="keyword">instanceof</span> Rectangle) &#123;</span><br><span class="line">            <span class="type">Rectangle</span> <span class="variable">r</span> <span class="operator">=</span> (Rectangle) s;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span> * r.length() + <span class="number">2</span> * r.width();</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s <span class="keyword">instanceof</span> Circle) &#123;</span><br><span class="line">            <span class="type">Circle</span> <span class="variable">c</span> <span class="operator">=</span> (Circle) s;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">2</span> * c.radius() * Math.PI;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Unrecognized shape&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>可以省略<code>Rectangle r = (Rectangle) s</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">getPerimeter</span><span class="params">(Shape shape)</span> <span class="keyword">throws</span> IllegalArgumentException &#123;</span><br><span class="line">    <span class="keyword">if</span> (s <span class="keyword">instanceof</span> Rectangle r) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * r.length() + <span class="number">2</span> * r.width();</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (s <span class="keyword">instanceof</span> Circle c) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">2</span> * c.radius() * Math.PI;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Unrecognized shape&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>要注意其局部变量<code>instance of Object o</code>有范围限制</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">double</span> <span class="title function_">getPerimeter</span><span class="params">(Shape shape)</span> <span class="keyword">throws</span> IllegalArgumentException &#123;</span><br><span class="line">    <span class="keyword">if</span> (shape <span class="keyword">instanceof</span> Rectangle s) &#123;</span><br><span class="line">        <span class="comment">// You can use the pattern variable s (of type Rectangle) here.</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (shape <span class="keyword">instanceof</span> Circle s) &#123;</span><br><span class="line">        <span class="comment">// You can use the pattern variable s of type Circle here</span></span><br><span class="line">        <span class="comment">// but not the pattern variable s of type Rectangle.</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// You cannot use either pattern variable here.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>局部变量可以超过<code>if</code>的范围</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">bigEnoughRect</span><span class="params">(Shape s)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!(s <span class="keyword">instanceof</span> Rectangle r)) &#123;</span><br><span class="line">        <span class="comment">// You cannot use the pattern variable r here because</span></span><br><span class="line">        <span class="comment">// the predicate s instanceof Rectangle is false.</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// You can use r here.</span></span><br><span class="line">    <span class="keyword">return</span> r.length() &gt; <span class="number">5</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在<code>if</code>的<code>&amp;&amp;</code>表达式中使用时，要注意前后顺序</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (shape <span class="keyword">instanceof</span> Rectangle r &amp;&amp; r.length() &gt; <span class="number">5</span>) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>无法在<code>||</code>表达式中使用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (shape <span class="keyword">instanceof</span> Rectangle r || r.length() &gt; <span class="number">0</span>) &#123; <span class="comment">// error</span></span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="JDK17"><a href="#JDK17" class="headerlink" title="JDK17"></a>JDK17</h1><h2 id="Spring和SpringBoot"><a href="#Spring和SpringBoot" class="headerlink" title="Spring和SpringBoot"></a>Spring和SpringBoot</h2><p>Spring Framework6和SpringBoot 3默认采用最低JDK17。</p>
<h2 id="增强的伪随机数生成器"><a href="#增强的伪随机数生成器" class="headerlink" title="增强的伪随机数生成器"></a>增强的伪随机数生成器</h2><p>JDK17 增加了新的伪随机数生成器（RandomGenerator）接口，并提供了多种现代高质量的实现。它相比老的 java.util.Random 更易于使用，支持可插拔算法和流式 API 操作，适合对可重复性和性能有更高要求的场景。</p>
<h3 id="新API举例："><a href="#新API举例：" class="headerlink" title="新API举例："></a>新API举例：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.random.RandomGenerator;</span><br><span class="line"><span class="keyword">import</span> java.util.random.RandomGeneratorFactory;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取系统默认高质量生成器</span></span><br><span class="line"><span class="type">RandomGenerator</span> <span class="variable">generator</span> <span class="operator">=</span> RandomGenerator.getDefault();</span><br><span class="line"><span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> generator.nextInt(); <span class="comment">// 生成随机整数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 也可以指定算法，比如 &quot;L64X128MixRandom&quot;</span></span><br><span class="line"><span class="type">RandomGenerator</span> <span class="variable">l64x128</span> <span class="operator">=</span> RandomGeneratorFactory.of(<span class="string">&quot;L64X128MixRandom&quot;</span>).create();</span><br><span class="line">System.out.println(l64x128.nextDouble());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 支持流式生成</span></span><br><span class="line">generator.ints(<span class="number">5</span>, <span class="number">1</span>, <span class="number">10</span>).forEach(System.out::println); <span class="comment">// 输出5个1~9的随机整数</span></span><br></pre></td></tr></table></figure>

<h3 id="已内置的实现包括："><a href="#已内置的实现包括：" class="headerlink" title="已内置的实现包括："></a>已内置的实现包括：</h3><ul>
<li>L32X64MixRandom</li>
<li>L64X128MixRandom</li>
<li>Xoroshiro128PlusPlus</li>
<li>SplittableRandom（JDK8已有，被统一管理）</li>
<li>以及传统的 Random、SecureRandom 等</li>
</ul>
<h2 id="Sealed-Class-密封类"><a href="#Sealed-Class-密封类" class="headerlink" title="Sealed Class 密封类"></a>Sealed Class 密封类</h2><p>sealed 让父类显式声明可以继承其的子类，限制继承类型。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public sealed class Shape permits Circle, Rectangle &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public final class Circle extends Shape &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public non-sealed class Rectangle extends Shape &#123;</span><br><span class="line">    // ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>sealed</code>：声明 <code>Shape</code> 的继承是受限制的；</p>
<p><code>permits</code>：列出<strong>允许的子类</strong>；</p>
<p>子类必须显式声明继承策略：</p>
<ul>
<li><code>final</code> → 不能再被继承；</li>
<li><code>sealed</code> → 继续限制下一层继承；</li>
<li><code>non-sealed</code> → 解封，允许任何类再继承。</li>
</ul>
<h1 id="JDK21"><a href="#JDK21" class="headerlink" title="JDK21"></a>JDK21</h1><h2 id="Record-Patterns"><a href="#Record-Patterns" class="headerlink" title="Record Patterns"></a>Record Patterns</h2><h2 id="Switch类型匹配"><a href="#Switch类型匹配" class="headerlink" title="Switch类型匹配"></a>Switch类型匹配</h2><p>JDK21 增强了 <code>switch</code>，可用于类型判断和模式匹配，使代码更简洁、类型安全。</p>
<h3 id="基本语法："><a href="#基本语法：" class="headerlink" title="基本语法："></a>基本语法：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> String <span class="title function_">formatter</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">switch</span> (obj) &#123;</span><br><span class="line">        <span class="keyword">case</span> Integer i -&gt; <span class="string">&quot;整数: &quot;</span> + i;</span><br><span class="line">        <span class="keyword">case</span> String s -&gt; <span class="string">&quot;字符串: &quot;</span> + s;</span><br><span class="line">        <span class="keyword">case</span> <span class="literal">null</span>     -&gt; <span class="string">&quot;null&quot;</span>;</span><br><span class="line">        <span class="keyword">default</span>       -&gt; <span class="string">&quot;其他类型&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>case Integer i</code>：如果是<code>Integer</code>类型，自动解包为变量<code>i</code></li>
<li><code>case String s</code>：如果是<code>String</code>类型，自动解包为变量<code>s</code></li>
<li>可以直接匹配<code>null</code></li>
<li><code>default</code>为兜底分支</li>
</ul>
<h3 id="结合守卫（when）进一步增强："><a href="#结合守卫（when）进一步增强：" class="headerlink" title="结合守卫（when）进一步增强："></a>结合守卫（when）进一步增强：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> String <span class="title function_">kind</span><span class="params">(Number number)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">switch</span> (number) &#123;</span><br><span class="line">        <span class="keyword">case</span> Integer i <span class="keyword">when</span> i &gt; <span class="number">0</span> -&gt; <span class="string">&quot;正整数&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> Integer i -&gt; <span class="string">&quot;非正整数&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> Double d <span class="keyword">when</span> d.isNaN() -&gt; <span class="string">&quot;NaN&quot;</span>;</span><br><span class="line">        <span class="keyword">case</span> Double d -&gt; <span class="string">&quot;浮点数&quot;</span>;</span><br><span class="line">        <span class="keyword">default</span> -&gt; <span class="string">&quot;其他数字类型或null&quot;</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>when</code>后跟条件，只有条件满足时才匹配该分支</li>
</ul>
<h3 id="使用示例："><a href="#使用示例：" class="headerlink" title="使用示例："></a>使用示例：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    System.out.println(formatter(<span class="number">123</span>));      <span class="comment">// 输出: 整数: 123</span></span><br><span class="line">    System.out.println(formatter(<span class="string">&quot;hi&quot;</span>));     <span class="comment">// 输出: 字符串: hi</span></span><br><span class="line">    System.out.println(formatter(<span class="literal">null</span>));     <span class="comment">// 输出: null</span></span><br><span class="line">    System.out.println(formatter(<span class="number">3.14</span>));     <span class="comment">// 输出: 其他类型</span></span><br><span class="line"></span><br><span class="line">    System.out.println(kind(<span class="number">5</span>));             <span class="comment">// 输出: 正整数</span></span><br><span class="line">    System.out.println(kind(-<span class="number">10</span>));           <span class="comment">// 输出: 非正整数</span></span><br><span class="line">    System.out.println(kind(Double.NaN));    <span class="comment">// 输出: NaN</span></span><br><span class="line">    System.out.println(kind(<span class="number">2.5</span>));           <span class="comment">// 输出: 浮点数</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>类型安全，避免频繁的<code>instanceof</code>+强转</li>
<li>代码逻辑更清晰、简洁</li>
</ul>
<h2 id="虚拟线程"><a href="#虚拟线程" class="headerlink" title="虚拟线程"></a>虚拟线程</h2><p>JDK21 正式引入虚拟线程（virtual threads），这是 Java 并发模型的一次重要革新。虚拟线程是一种轻量级线程，由 Java 虚拟机（JVM）调度，可以大幅提升高并发场景下的吞吐与资源利用率，极大简化高并发服务器编写难度。</p>
<h3 id="主要特性-1"><a href="#主要特性-1" class="headerlink" title="主要特性"></a>主要特性</h3><ul>
<li>虚拟线程是 <code>Thread</code> 的一种实现（<code>java.lang.Thread</code>），与平台线程拥有基本一致的 API。</li>
<li>创建和销毁虚拟线程的代价极低，通常能轻松创建数万甚至百万级的虚拟线程。</li>
<li>让阻塞型代码（如 I&#x2F;O、sleep 等）与异步编程一样高效，但代码风格仍为同步方式，易读易维护。</li>
<li>线程调度交由 JVM，背后通常与平台线程池绑定，但用户无需关心。</li>
</ul>
<h3 id="基本用法示例"><a href="#基本用法示例" class="headerlink" title="基本用法示例"></a>基本用法示例</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VirtualThreadDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException &#123;</span><br><span class="line">        <span class="comment">// 创建单个虚拟线程并启动</span></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">vThread</span> <span class="operator">=</span> Thread.startVirtualThread(() -&gt; &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;Hello from virtual thread! 当前线程: &quot;</span> + Thread.currentThread());</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 等待线程结束</span></span><br><span class="line">        vThread.join();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 同时启动一万个虚拟线程，每个线程 sleep 一下</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">10_000</span>;</span><br><span class="line">        Thread[] threads = <span class="keyword">new</span> <span class="title class_">Thread</span>[count];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            threads[i] = Thread.startVirtualThread(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">100</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;&#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 等待所有虚拟线程结束</span></span><br><span class="line">        <span class="keyword">for</span> (Thread t : threads) &#123;</span><br><span class="line">            t.join();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;所有虚拟线程已结束&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用-Executors-新-API-批量提交任务"><a href="#使用-Executors-新-API-批量提交任务" class="headerlink" title="使用 Executors 新 API 批量提交任务"></a>使用 Executors 新 API 批量提交任务</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">var</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newVirtualThreadPerTaskExecutor();</span><br><span class="line"><span class="keyword">try</span> (executor) &#123;</span><br><span class="line">    IntStream.range(<span class="number">0</span>, <span class="number">10_000</span>).forEach(i -&gt;</span><br><span class="line">        executor.submit(() -&gt; &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line">System.out.println(<span class="string">&quot;全部任务提交结束&quot;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="主要意义"><a href="#主要意义" class="headerlink" title="主要意义"></a>主要意义</h3><ul>
<li>能用“看起来阻塞、实则调度高效”的方式编写高并发网络应用程序（如 Web 服务器）。</li>
<li>大幅减少复杂“回调地狱”或异步代码需求。</li>
<li>提高应用的可维护性、扩展性和吞吐能力。</li>
</ul>
<blockquote>
<p>虚拟线程的提出标志着 Java 在并发编程领域迈向 Go 之类“百万协程”时代的能力，同时保留了严谨的类型系统和现有生态的兼容性。</p>
</blockquote>
<h2 id="分代ZGC"><a href="#分代ZGC" class="headerlink" title="分代ZGC"></a>分代ZGC</h2><h3 id="JDK21-引入的分代ZGC（Generational-ZGC）"><a href="#JDK21-引入的分代ZGC（Generational-ZGC）" class="headerlink" title="JDK21 引入的分代ZGC（Generational ZGC）"></a>JDK21 引入的分代ZGC（Generational ZGC）</h3><p><strong>分代ZGC</strong>（Generational ZGC）是在原有 ZGC 垃圾回收器基础上实现的分代（Generational）功能，进一步提升了低延迟垃圾回收的效率，特别是在大对象、新生代对象生命周期频繁变动的应用场景。</p>
<h4 id="主要特性-2"><a href="#主要特性-2" class="headerlink" title="主要特性"></a>主要特性</h4><ul>
<li>支持将堆划分为新生代（Young Generation）和老年代（Old Generation）</li>
<li>对大多数短命对象进行更高效的内存回收，减少 Full GC 发生频率</li>
<li>保持 ZGC 本身的低暂停（亚毫秒级）和可扩展性</li>
<li>提升了吞吐量，降低了应用延迟</li>
</ul>
<h4 id="启用分代ZGC"><a href="#启用分代ZGC" class="headerlink" title="启用分代ZGC"></a>启用分代ZGC</h4><p>启动参数示例（JDK21+）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-XX:+UseZGC -XX:+ZGenerational</span><br></pre></td></tr></table></figure>

<h4 id="代码体验（无需代码改动，参数可用即生效）"><a href="#代码体验（无需代码改动，参数可用即生效）" class="headerlink" title="代码体验（无需代码改动，参数可用即生效）"></a>代码体验（无需代码改动，参数可用即生效）</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 启动 JVM 时加如下参数：</span></span><br><span class="line"><span class="comment">// -XX:+UseZGC -XX:+ZGenerational</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ZGCDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">100_000</span>; i++) &#123;</span><br><span class="line">            <span class="type">byte</span>[] arr = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span>]; <span class="comment">// 分配 1MB</span></span><br><span class="line">            Thread.sleep(<span class="number">10</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>日志示例（可以添加 -Xlog:gc* 观察）：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[0.123s][info][gc,start     ] GC(0) Pause Young (Normal) (G1 Evacuation Pause)</span><br><span class="line">[0.126s][info][gc,stats     ] GC(0) Pause Young (Normal) 2M-&gt;0.5M(32M)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h4 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h4><ul>
<li>分代ZGC 结合了分代回收的高效性和 ZGC 的低延迟能力，非常适用于服务端、大型数据应用和需要低暂停的系统。</li>
<li>若使用 ZGC，推荐在 JDK21+ 加启 <code>-XX:+ZGenerational</code> 以充分发挥优势。</li>
</ul>
<p>更多参考：<br><a target="_blank" rel="noopener" href="https://openjdk.org/jeps/439">https://openjdk.org/jeps/439</a><br><a target="_blank" rel="noopener" href="https://wiki.openjdk.org/display/zgc/Main">https://wiki.openjdk.org/display/zgc/Main</a></p>
<h1 id="JDK22"><a href="#JDK22" class="headerlink" title="JDK22"></a>JDK22</h1><h2 id="未命名变量"><a href="#未命名变量" class="headerlink" title="未命名变量"></a>未命名变量</h2></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">John Doe</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2025/08/12/Java/JDK%E5%90%84%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2025/08/12/Java/JDK%E5%90%84%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/')">JDK各个版本特性总结</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2025/08/12/Java/JDK%E5%90%84%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=JDK各个版本特性总结&amp;url=http://example.com/2025/08/12/Java/JDK%E5%90%84%E7%89%88%E6%9C%AC%E7%89%B9%E6%80%A7/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"></div></div></div><div class="post_share"><div class="social-share" data-image="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/08/12/Java/JVM%E8%87%AA%E5%8A%A8%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">JVM自动内存管理</div></div></a></div><div class="next-post pull-right"><a href="/2025/08/12/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">数据结构</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://bu.dusays.com/2023/04/27/64496e511b09c.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK8"><span class="toc-number">1.</span> <span class="toc-text">JDK8</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%A5%E5%8F%A3%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95%EF%BC%88%E9%9D%9E%E6%8A%BD%E8%B1%A1%E6%96%B9%E6%B3%95%EF%BC%89"><span class="toc-number">1.1.</span> <span class="toc-text">接口默认方法（非抽象方法）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.2.</span> <span class="toc-text">Lambda表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#StreamAPI"><span class="toc-number">1.3.</span> <span class="toc-text">StreamAPI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E6%96%B9%E6%B3%95"><span class="toc-number">1.4.</span> <span class="toc-text">默认方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Optional%E7%B1%BB"><span class="toc-number">1.5.</span> <span class="toc-text">Optional类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK9"><span class="toc-number">2.</span> <span class="toc-text">JDK9</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96%E7%B3%BB%E7%BB%9F%EF%BC%88Project-Jigsaw%EF%BC%89"><span class="toc-number">2.1.</span> <span class="toc-text">模块化系统（Project Jigsaw）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E5%8F%98%E5%8C%96"><span class="toc-number">2.1.1.</span> <span class="toc-text">主要变化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E8%AF%AD%E6%B3%95"><span class="toc-number">2.1.2.</span> <span class="toc-text">关键语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%9D%97%E5%8C%96%E5%BA%94%E7%94%A8"><span class="toc-number">2.1.3.</span> <span class="toc-text">启动模块化应用</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#G1-%E6%88%90%E4%B8%BA%E9%BB%98%E8%AE%A4%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%EF%BC%88GC%EF%BC%89"><span class="toc-number">2.2.</span> <span class="toc-text">G1 成为默认垃圾回收器（GC）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E7%89%B9%E6%80%A7"><span class="toc-number">2.2.1.</span> <span class="toc-text">主要特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%BD%93%E9%AA%8C"><span class="toc-number">2.2.2.</span> <span class="toc-text">代码体验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E6%8C%87%E5%AE%9A%E4%BD%BF%E7%94%A8%E5%85%B6%E5%AE%83-GC"><span class="toc-number">2.2.3.</span> <span class="toc-text">手动指定使用其它 GC</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JShell%EF%BC%88%E4%BA%A4%E4%BA%92%E5%BC%8F-REPL-%E5%B7%A5%E5%85%B7%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">JShell（交互式 REPL 工具）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-number">2.4.</span> <span class="toc-text">其他新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A7%81%E6%9C%89%E6%8E%A5%E5%8F%A3%E6%96%B9%E6%B3%95"><span class="toc-number">2.4.1.</span> <span class="toc-text">私有接口方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9B%86%E5%90%88%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95"><span class="toc-number">2.4.2.</span> <span class="toc-text">集合工厂方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#try-with-resources-%E6%94%B9%E8%BF%9B"><span class="toc-number">2.4.3.</span> <span class="toc-text">try-with-resources 改进</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Stream-API-%E5%A2%9E%E5%BC%BA"><span class="toc-number">2.4.4.</span> <span class="toc-text">Stream API 增强</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK11"><span class="toc-number">3.</span> <span class="toc-text">JDK11</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0%E7%89%B9%E6%80%A7%E4%BB%8B%E7%BB%8D"><span class="toc-number">3.0.1.</span> <span class="toc-text">新特性介绍</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E6%96%B0%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%96%B9%E6%B3%95"><span class="toc-number">3.0.1.1.</span> <span class="toc-text">1. 新的字符串方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%9C%AC%E5%9C%B0%E5%8F%98%E9%87%8F%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%AD%E6%94%AF%E6%8C%81-lambda-%E5%8F%82%E6%95%B0%EF%BC%88%E5%8D%87%E7%BA%A7%EF%BC%89"><span class="toc-number">3.0.1.2.</span> <span class="toc-text">2. 本地变量类型推断支持 lambda 参数（升级）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%96%87%E4%BB%B6-I-O-%E5%A2%9E%E5%BC%BA"><span class="toc-number">3.0.1.3.</span> <span class="toc-text">3. 文件 I&#x2F;O 增强</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a-Files-readString-%E5%92%8C-Files-writeString"><span class="toc-number">3.0.1.3.1.</span> <span class="toc-text">a) Files.readString 和 Files.writeString</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#b-InputStream-transferTo-OutputStream"><span class="toc-number">3.0.1.3.2.</span> <span class="toc-text">b) InputStream.transferTo(OutputStream)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E9%9B%86%E5%90%88%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E5%A2%9E%E5%BC%BA"><span class="toc-number">3.0.1.4.</span> <span class="toc-text">4. 集合工厂方法增强</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%96%B0%E7%9A%84-Http-Client-API-%E6%A0%87%E5%87%86"><span class="toc-number">3.0.1.5.</span> <span class="toc-text">5. 新的 Http Client API 标准</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%99%A8%E5%8F%98%E5%8C%96"><span class="toc-number">3.0.1.6.</span> <span class="toc-text">6. 垃圾回收器变化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-%E6%96%B0%E7%9A%84%E7%B1%BB%E5%BA%93%E5%92%8CAPI%E7%A7%BB%E9%99%A4"><span class="toc-number">3.0.1.7.</span> <span class="toc-text">7. 新的类库和API移除</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#8-%E5%85%B6%E4%BB%96"><span class="toc-number">3.0.1.8.</span> <span class="toc-text">8. 其他</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%80%E9%83%A8%E7%B1%BB%E5%9E%8B%E6%8E%A8%E6%96%ADVar"><span class="toc-number">3.1.</span> <span class="toc-text">局部类型推断Var</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%AE%9A%E4%B9%89%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="toc-number">3.1.1.</span> <span class="toc-text">1.初始化定义局部变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%A2%9E%E5%BC%BAfor%E5%BE%AA%E7%8E%AF"><span class="toc-number">3.1.2.</span> <span class="toc-text">2.增强for循环</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E4%BC%A0%E7%BB%9Ffor%E5%BE%AA%E7%8E%AF%E7%9A%84index%E5%AE%9A%E4%B9%89"><span class="toc-number">3.1.3.</span> <span class="toc-text">3.传统for循环的index定义</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-try%E5%8C%85%E8%A3%B9%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-number">3.1.4.</span> <span class="toc-text">4.try包裹的变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-lambda%E4%B8%AD%E9%9A%90%E5%90%AB%E7%9A%84var%E6%8E%A8%E6%96%AD"><span class="toc-number">3.1.5.</span> <span class="toc-text">5.lambda中隐含的var推断</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2API%E5%A2%9E%E5%BC%BA"><span class="toc-number">3.2.</span> <span class="toc-text">字符串API增强</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%87%E5%87%86%E5%8C%96HttpClient"><span class="toc-number">3.3.</span> <span class="toc-text">标准化HttpClient</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">3.4.</span> <span class="toc-text">模块化</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK14"><span class="toc-number">4.</span> <span class="toc-text">JDK14</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Switch%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.1.</span> <span class="toc-text">Switch表达式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK15"><span class="toc-number">5.</span> <span class="toc-text">JDK15</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E6%9C%AC%E5%9D%97"><span class="toc-number">5.1.</span> <span class="toc-text">文本块</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK16"><span class="toc-number">6.</span> <span class="toc-text">JDK16</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#record%E7%B1%BB"><span class="toc-number">6.1.</span> <span class="toc-text">record类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E6%A0%87%E5%87%86%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">6.1.1.</span> <span class="toc-text">定义标准构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">6.1.2.</span> <span class="toc-text">隐式构造函数参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E9%9D%9E%E6%A0%87%E5%87%86%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"><span class="toc-number">6.1.3.</span> <span class="toc-text">定义非标准构造函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E5%A3%B0%E6%98%8E%E5%85%AC%E5%85%B1%E8%AE%BF%E9%97%AE%E5%99%A8"><span class="toc-number">6.1.4.</span> <span class="toc-text">显式声明公共访问器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#record%E7%89%B9%E6%80%A7"><span class="toc-number">6.1.5.</span> <span class="toc-text">record特性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Instance-of-%E5%8C%B9%E9%85%8D"><span class="toc-number">6.2.</span> <span class="toc-text">Instance of 匹配</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK17"><span class="toc-number">7.</span> <span class="toc-text">JDK17</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring%E5%92%8CSpringBoot"><span class="toc-number">7.1.</span> <span class="toc-text">Spring和SpringBoot</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E%E5%BC%BA%E7%9A%84%E4%BC%AA%E9%9A%8F%E6%9C%BA%E6%95%B0%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-number">7.2.</span> <span class="toc-text">增强的伪随机数生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B0API%E4%B8%BE%E4%BE%8B%EF%BC%9A"><span class="toc-number">7.2.1.</span> <span class="toc-text">新API举例：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%B2%E5%86%85%E7%BD%AE%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8C%85%E6%8B%AC%EF%BC%9A"><span class="toc-number">7.2.2.</span> <span class="toc-text">已内置的实现包括：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Sealed-Class-%E5%AF%86%E5%B0%81%E7%B1%BB"><span class="toc-number">7.3.</span> <span class="toc-text">Sealed Class 密封类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK21"><span class="toc-number">8.</span> <span class="toc-text">JDK21</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Record-Patterns"><span class="toc-number">8.1.</span> <span class="toc-text">Record Patterns</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Switch%E7%B1%BB%E5%9E%8B%E5%8C%B9%E9%85%8D"><span class="toc-number">8.2.</span> <span class="toc-text">Switch类型匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95%EF%BC%9A"><span class="toc-number">8.2.1.</span> <span class="toc-text">基本语法：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E5%90%88%E5%AE%88%E5%8D%AB%EF%BC%88when%EF%BC%89%E8%BF%9B%E4%B8%80%E6%AD%A5%E5%A2%9E%E5%BC%BA%EF%BC%9A"><span class="toc-number">8.2.2.</span> <span class="toc-text">结合守卫（when）进一步增强：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%A4%BA%E4%BE%8B%EF%BC%9A"><span class="toc-number">8.2.3.</span> <span class="toc-text">使用示例：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E7%BA%BF%E7%A8%8B"><span class="toc-number">8.3.</span> <span class="toc-text">虚拟线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E7%89%B9%E6%80%A7-1"><span class="toc-number">8.3.1.</span> <span class="toc-text">主要特性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95%E7%A4%BA%E4%BE%8B"><span class="toc-number">8.3.2.</span> <span class="toc-text">基本用法示例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-Executors-%E6%96%B0-API-%E6%89%B9%E9%87%8F%E6%8F%90%E4%BA%A4%E4%BB%BB%E5%8A%A1"><span class="toc-number">8.3.3.</span> <span class="toc-text">使用 Executors 新 API 批量提交任务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E6%84%8F%E4%B9%89"><span class="toc-number">8.3.4.</span> <span class="toc-text">主要意义</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E4%BB%A3ZGC"><span class="toc-number">8.4.</span> <span class="toc-text">分代ZGC</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#JDK21-%E5%BC%95%E5%85%A5%E7%9A%84%E5%88%86%E4%BB%A3ZGC%EF%BC%88Generational-ZGC%EF%BC%89"><span class="toc-number">8.4.1.</span> <span class="toc-text">JDK21 引入的分代ZGC（Generational ZGC）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E7%89%B9%E6%80%A7-2"><span class="toc-number">8.4.1.1.</span> <span class="toc-text">主要特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%90%AF%E7%94%A8%E5%88%86%E4%BB%A3ZGC"><span class="toc-number">8.4.1.2.</span> <span class="toc-text">启用分代ZGC</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E4%BD%93%E9%AA%8C%EF%BC%88%E6%97%A0%E9%9C%80%E4%BB%A3%E7%A0%81%E6%94%B9%E5%8A%A8%EF%BC%8C%E5%8F%82%E6%95%B0%E5%8F%AF%E7%94%A8%E5%8D%B3%E7%94%9F%E6%95%88%EF%BC%89"><span class="toc-number">8.4.1.3.</span> <span class="toc-text">代码体验（无需代码改动，参数可用即生效）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">8.4.1.4.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JDK22"><span class="toc-number">9.</span> <span class="toc-text">JDK22</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%AA%E5%91%BD%E5%90%8D%E5%8F%98%E9%87%8F"><span class="toc-number">9.1.</span> <span class="toc-text">未命名变量</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/31/%E7%BD%91%E7%BB%9C/Untitled%201/" title="No title">No title</a><time datetime="2025-12-31T09:16:59.317Z" title="Created 2025-12-31 17:16:59">2025-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/31/linux%E5%86%85%E6%A0%B8/" title="No title">No title</a><time datetime="2025-12-31T09:16:59.316Z" title="Created 2025-12-31 17:16:59">2025-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/31/%E4%B8%AA%E4%BA%BA%E4%BB%8B%E7%BB%8D/" title="No title">No title</a><time datetime="2025-12-31T09:16:59.316Z" title="Created 2025-12-31 17:16:59">2025-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/31/hello-world/" title="Hello World">Hello World</a><time datetime="2025-12-31T09:16:59.315Z" title="Created 2025-12-31 17:16:59">2025-12-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/12/31/Java/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/" title="代理模式">代理模式</a><time datetime="2025-12-31T01:52:52.000Z" title="Created 2025-12-31 09:52:52">2025-12-31</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="John Doe" target="_blank">John Doe</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">Articles</div><div class="length-num">38</div></a><a href="/tags/" title="tag"><div class="headline">Tags</div><div class="length-num">6</div></a><a href="/categories/" title="category"><div class="headline">Categories</div><div class="length-num">20</div></a></div><span class="sidebar-menu-item-title">Function</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="Display Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>Display Mode</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>2</sup></a><a href="/tags/leetcode/" style="font-size: 0.88rem;">leetcode<sup>5</sup></a><a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 0.88rem;">分布式<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 0.88rem;">数据库<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>1</sup></a><a href="/tags/%E7%BD%91%E7%BB%9C%E5%AE%89%E5%85%A8/" style="font-size: 0.88rem;">网络安全<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">繁</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 John Doe 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>